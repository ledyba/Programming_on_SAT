# Programming on SAT

　この本は、SATソルバーの能力だけを使って様々なプログラミングを行う本です。

　SATソルバーとはそもそも何なのかの説明からスタートして、最後は非決定性BrainfuckプログラムをSATの問題に帰着することで、コンピュータサイエンスで極めて重要な概念「NP完全」の証明の実演を行うことを目指します。

　「論理式だけで何でも問題を解く」、と聞くと単なる曲芸プログラミングだと思われがちですが、その中には様々なプログラミングテクニックと情報科学の実例が詰まっています。

　きっとあなたが、SATソルバーライフを楽しめますように。

# SATソルバーとは？

　SATソルバー、あまりウェブアプリやスマートフォンアプリを作っている時には聞かないワードです。コンピュータ科学の理論よりの講義で一回聞いただけという方も多いと思います。というわけで、SATソルバーの説明から行いましょう。

　まず、SATソルバーはプログラムです。そして、その入力は論理式です。論理式は高校数学の意味での論理式である、といっても良いですし、プログラムでいえば、bool型の変数とand/or/not演算子を組み合わせた式であるともいえます。

　例えば、次のようなものです。


$$ P $$

$$ \not P $$

$$ P \and (\not Q) $$

$$ Q \or R $$

$$ Q \or ( (\not Q) \and R ) \and R $$

　数学には目がくらむぜ、という人は、C++で書く次のスタイルのほうが好きかもしれません。

```c++
// C++で書くなら…
bool p,q,r;

p;
!p;
p && !p;
q || r;
q || (!q && r) && r;
```

　実はSATソルバーはこのうちの限られたものしか一般には受け取ることができません。その限られたものをCSATと呼ぶのですが、これに関してはまたあとで実際に論理式をSATに入力しようという時に考えます。

　さて、SATソルバーは論理式を受け取って、「充足できるか否か(SATisfiability)」を答えとして返します。はあって感じですか。具体的には、上の論理式それぞれに対して、次のような答えを返します。

```c++
// C++で書きます。
bool p,q,r;

p; // yes. p = true;
!p; // yes. p = false;
p && !p; // no. p=trueでもp=falseでも充足不能。
q || r; // yes. q = true または r = trueなら、残りの変数は何でもtrueになる。
q || (!q && r) && r; //yes. q = trueならあとは何でもよい。
```

　つまり、変数それぞれにtrue/falseを割り当てた時に、全体の論理式がtrueにできることを「充足できる」と言います。

　3つめはpとしてtrue/falseのどちらを入れてもfalseにしかなりません。そういう時は「どう頑張ってもこの論理式はtrueにできないぞ」と答えます。これが「充足不能」
