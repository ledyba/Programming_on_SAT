# あなたとSATソルバー、いますぐ論理式充足
## SATソルバーとは？

　SATソルバー、ウェブアプリやスマートフォンアプリを作っているような時にはあまり聞かないワードです。コンピュータ科学の理論よりの講義で一回聞いただけという方も多いと思います。というわけで、SATソルバーの説明から行いましょう。

　まず、SATソルバーはプログラムです。そしてプログラムですから、入力と出力があります。入力は論理式です。論理式は高校数学の意味での論理式そのもので、プログラムでいえば、bool型の変数とand/or/not演算子を組み合わせた式であるともいえます。

　例えば、次のようなものです。


$$ P $$

$$ \lnot P $$

$$ P \land (\lnot Q) $$

$$ Q \lor R $$

$$ Q \lor ( ( (\lnot Q) \land R ) \land R ) $$

　数学記号を見ていると目が痛くなる、という人は、C++で書く次のスタイルのほうが好きかもしれません。

```c++
// C++で書くなら…
bool p,q,r;

p;
!p;
p && !p;
q || r;
q || ((!q && r) && r);
```

　実はSATソルバーはこのうちの限られたCNFと呼ばれる形のものしか受け取ることができないのですが、これに関してはまたあとで実際に論理式をSATに入力する時に考えます。

　さて、SATソルバーはこれらの入力された論理式を分析して、入力された論理式が「充足できるか否か(SATisfiability)」を答えとして返します。アッハイって感じですね。具体的には、上の論理式それぞれに対して、次のような答えを返します。

```c++
// C++っぽく書きます。
bool p,q,r;

p; // yes. p = true;
!p; // yes. p = false;
p && !p; // no. p=trueでもp=falseでも式全体はfalse。
q || r; // yes. q = true または r = true。
q || ((!q && r) && r); //yes. q = true。
```

　つまり、変数それぞれにtrue/falseを割り当てた時に、論理式の全体がtrueにできることを「充足できる」と言います。

　3つめはpとしてtrue/falseのどちらを入れても式全体ではfalseにしかなりません。そういう時は「どう頑張ってもこの論理式はtrueにできないぞ」と答えます。これが「充足不能」です。

　あとの２つは、論理式をtrueにする論理変数の組み合わせがたくさんあります。たとえば、４つめのq || rはqがtrueならrはtrueでもfalseでも構いません（orですから）。こういう時は、SATソルバーはそのうちの組み合わせのどれか一つを返します。p || qの時は、
　
```c++
p = true; q = true;
p = false; q = true;
p = true; q = false;
```

のうちのどれかです。SATのソルバーを普通に使うときは大抵このうちのどれでもいい事が多いのですが、今回のようにSATソルバーで計算させる時は結果が一つなことが多いです（だって、足し算の結果が２つもあるわけないじゃないですか？）。




　
